<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>IPS | PayGate API</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-screen bg-gray-50">

    <!-- Mobile Sidebar Overlay -->
    <div id="sidebarOverlay" class="fixed inset-0 z-40 bg-gray-600 bg-opacity-75 hidden lg:hidden" aria-hidden="true">
    </div>

    <!-- Mobile Sidebar -->
    <aside id="mobileSidebar"
        class="fixed inset-y-0 left-0 z-50 w-64 bg-[#0A2540] transform -translate-x-full transition-transform duration-300 lg:hidden"
        aria-label="Mobile sidebar">
        <div class="flex items-center justify-between h-16 px-4 border-b border-gray-700">
            <div class="flex items-center">
                <div class="h-8 w-8 bg-gradient-to-r from-[#0A2540] to-[#00C4B3] rounded-lg mr-2"></div>
                <span class="text-white font-bold text-xl">PayGate</span>
            </div>
            <button id="closeSidebarBtn" aria-label="Close sidebar" class="p-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>

        <nav class="flex-1 px-4 py-4 text-gray-300 overflow-y-auto">
            <a href="./dashboard-home.html"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <svg class="h-5 w-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7m-9 2v8m4-8v8"></path>
                </svg>
                Dashboard
            </a>

            <a href="./transactions.html"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <svg class="h-5 w-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="4" width="18" height="16" rx="2"></rect>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                Transactions
            </a>

            <a href="./wallets.html"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <svg class="h-5 w-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v2"></path>
                    <rect x="3" y="11" width="18" height="6" rx="2"></rect>
                </svg>
                Wallet
            </a>

            <a href="./ips.html"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <span>üåê</span>
                <span class="ml-3">IPs</span>
            </a>

            <a href="../services/services.html"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <svg class="h-5 w-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
                Services
            </a>

            <a href="./analytics.html"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <span>üìä</span>
                <span class="ml-3">Analytics</span>
            </a>

            <a href="./customers.html"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <span>üë•</span>
                <span class="ml-3">Customers</span>
            </a>

            <a href="./settings.html"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <span>‚öôÔ∏è</span>
                <span class="ml-3">Settings</span>
            </a>

            <a href="./support.html"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <span>‚ùì</span>
                <span class="ml-3">Help & Support</span>
            </a>

            <div class="pt-4 mt-4 border-t border-gray-700">
                <a href="/"
                    class="group flex items-center px-2 py-2 text-base font-medium rounded-md text-gray-300 hover:bg-[#00C4B3]/10 hover:text-white">
                    <span>üö™</span>
                    <span class="ml-3">Log Out</span>
                </a>
            </div>
        </nav>
    </aside>

    <!-- Desktop Sidebar -->
    <aside class="hidden lg:flex lg:flex-col lg:w-64 lg:fixed lg:inset-y-0 lg:bg-[#0A2540]"
        aria-label="Desktop sidebar">
        <div class="flex items-center h-16 px-4 border-b border-gray-700">
            <div class="flex items-center">
                <div class="h-8 w-8 bg-gradient-to-r from-[#0A2540] to-[#00C4B3] rounded-lg mr-2"></div>
                <span class="text-white font-bold text-xl">PayGate</span>
            </div>
        </div>

        <nav class="flex-1 px-4 py-4 text-gray-300 overflow-y-auto">
            <a href="/dashboard"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <svg class="h-5 w-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7m-9 2v8m4-8v8"></path>
                </svg>
                Dashboard
            </a>

            <a href="/dashboard/transactions"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <svg class="h-5 w-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="4" width="18" height="16" rx="2"></rect>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                Transactions
            </a>

            <a href="/dashboard/wallet"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <svg class="h-5 w-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v2"></path>
                    <rect x="3" y="11" width="18" height="6" rx="2"></rect>
                </svg>
                Wallet
            </a>

            <a href="/dashboard/ips"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <span>üåê</span>
                <span class="ml-3">IPs</span>
            </a>

            <a href="/dashboard/services"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <svg class="h-5 w-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
                Services
            </a>

            <a href="/dashboard/analytics"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <span>üìä</span>
                <span class="ml-3">Analytics</span>
            </a>

            <a href="/dashboard/customers"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <span>üë•</span>
                <span class="ml-3">Customers</span>
            </a>

            <a href="/dashboard/settings"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <span>‚öôÔ∏è</span>
                <span class="ml-3">Settings</span>
            </a>

            <a href="/dashboard/support"
                class="group flex items-center px-2 py-2 text-base font-medium rounded-md hover:bg-[#00C4B3]/10 hover:text-white">
                <span>‚ùì</span>
                <span class="ml-3">Help & Support</span>
            </a>

            <div class="pt-4 mt-4 border-t border-gray-700">
                <a href="/"
                    class="group flex items-center px-2 py-2 text-base font-medium rounded-md text-gray-300 hover:bg-[#00C4B3]/10 hover:text-white">
                    <span>üö™</span>
                    <span class="ml-3">Log Out</span>
                </a>
            </div>
        </nav>
    </aside>

    <!-- Main content -->
    <div class="flex-1 flex flex-col lg:pl-64 min-h-screen">
        <header class="bg-white shadow-sm z-10">
            <div class="flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8">
                <button id="openSidebarBtn" class="lg:hidden text-gray-500 focus:outline-none"
                    aria-label="Open sidebar">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>

                <div class="flex-1 flex justify-center px-2 lg:ml-6 lg:justify-end">
                    <div class="max-w-lg w-full lg:max-w-xs relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" stroke-width="2"
                                viewBox="0 0 24 24">
                                <circle cx="11" cy="11" r="7"></circle>
                                <path d="M21 21l-4.35-4.35"></path>
                            </svg>
                        </div>
                        <input type="search" placeholder="Search"
                            class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md bg-white placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-[#00C4B3] focus:border-[#00C4B3] sm:text-sm">
                    </div>
                </div>

                <div class="flex items-center space-x-4">
                    <div class="bg-gray-200 rounded-full h-8 w-8 flex items-center justify-center">
                        <span class="text-sm font-medium text-gray-700">JD</span>
                    </div>
                </div>
            </div>
        </header>

        <main class="flex-1 py-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h1 class="text-2xl font-semibold text-gray-900">IP Whitelisting</h1>
            <p class="mt-1 text-sm text-gray-500">Manage IP addresses that are allowed to access your API</p>

            <!-- Main Card -->
            <div class="mt-6 bg-white shadow-sm sm:rounded-lg p-6">
                <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6 space-y-4 md:space-y-0">
                    <div>
                        <h3 class="text-lg font-medium text-gray-900">Whitelisted IP Addresses</h3>
                        <p class="mt-1 text-sm text-gray-500">Only requests from these IP addresses will be processed
                        </p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="flex items-center">
                            üõ°Ô∏è <span class="text-sm text-gray-700 ml-2">IP Whitelisting: Active</span>
                        </div>
                        <button type="button" onclick="refreshList()"
                            class="inline-flex items-center px-3 py-2 text-sm font-medium rounded-md shadow-sm text-white bg-[#00C4B3] hover:bg-[#00C4B3]/90">
                            üîÑ Refresh
                        </button>
                    </div>
                </div>

                <!-- Add IP Form -->
                <div class="bg-gray-50 p-4 rounded-md mb-6">
                    <h4 class="text-base font-medium text-gray-900 mb-3">Add New IP Address</h4>
                    <div class="grid grid-cols-1 gap-4 sm:grid-cols-3">
                        <input type="text" id="ipInput" placeholder="IP Address"
                            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#00C4B3] focus:border-[#00C4B3] sm:text-sm">
                        <input type="text" id="descInput" placeholder="Description"
                            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#00C4B3] focus:border-[#00C4B3] sm:text-sm">
                        <button type="button" onclick="addIp()"
                            class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-[#00C4B3] hover:bg-[#00C4B3]/90">
                            ‚ûï Add IP
                        </button>
                    </div>
                    <div id="errorMsg" class="mt-2 flex items-center text-sm text-red-600 hidden">
                        ‚ö†Ô∏è <span id="errorText" class="ml-1"></span>
                    </div>
                </div>

                <!-- IP Table -->
                <div class="mt-4">
                    <!-- Large screens: Table -->
                    <div class="hidden lg:block overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th
                                        class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        IP Address</th>
                                    <th
                                        class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Description</th>
                                    <th
                                        class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Last Used</th>
                                    <th
                                        class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Status</th>
                                    <th class="px-4 py-2"><span class="sr-only">Actions</span></th>
                                </tr>
                            </thead>
                            <tbody id="ipTableLg" class="bg-white divide-y divide-gray-200"></tbody>
                        </table>
                    </div>

                    <!-- Small screens: Cards -->
                    <div id="ipTableSm" class="lg:hidden space-y-4"></div>
                </div>


                <!-- Info Panel -->
                <div class="mt-6 bg-yellow-50 p-4 rounded-md flex space-x-2">
                    ‚ö†Ô∏è
                    <div>
                        <h3 class="text-sm font-medium text-yellow-800">Important Information</h3>
                        <p class="mt-1 text-sm text-yellow-700">
                            IP whitelisting adds an extra layer of security by restricting API access to specified IP
                            addresses only. Make sure to add all the IP addresses that will be used to access the API.
                        </p>
                    </div>
                </div>
            </div>
        </main>


    </div>

    <script>
        // Elements
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        const mobileSidebar = document.getElementById('mobileSidebar');
        const openSidebarBtn = document.getElementById('openSidebarBtn');
        const closeSidebarBtn = document.getElementById('closeSidebarBtn');

        // Open mobile sidebar
        function openSidebar() {
            sidebarOverlay.classList.remove('hidden');
            mobileSidebar.classList.remove('-translate-x-full');
            // prevent body scroll when sidebar open
            document.documentElement.style.overflow = 'hidden';
            document.body.style.overflow = 'hidden';
        }

        // Close mobile sidebar
        function closeSidebar() {
            sidebarOverlay.classList.add('hidden');
            mobileSidebar.classList.add('-translate-x-full');
            document.documentElement.style.overflow = '';
            document.body.style.overflow = '';
        }

        // Toggle wrapper used by inline onclick in header
        function toggleSidebar(show) {
            if (show) openSidebar();
            else closeSidebar();
        }

        // Hook buttons
        openSidebarBtn && openSidebarBtn.addEventListener('click', openSidebar);
        closeSidebarBtn && closeSidebarBtn.addEventListener('click', closeSidebar);
        sidebarOverlay && sidebarOverlay.addEventListener('click', closeSidebar);

        // Close sidebar on Esc
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeSidebar();
            }
        });


        // Initial IPs
        let whitelistedIps = [
            { id: '1', ip: '192.168.1.1', description: 'Office IP', lastUsed: '2023-07-15', status: 'active' },
            { id: '2', ip: '203.0.113.0', description: 'Home IP', lastUsed: '2023-07-10', status: 'active' }
        ];

        function renderTable() {
            const tableLg = document.getElementById('ipTableLg');
            const tableSm = document.getElementById('ipTableSm');

            tableLg.innerHTML = '';
            tableSm.innerHTML = '';

            whitelistedIps.forEach(ip => {
                // Desktop table row
                const row = document.createElement('tr');
                row.innerHTML = `
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${ip.ip}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${ip.description}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${ip.lastUsed}</td>
            <td class="px-6 py-4 whitespace-nowrap">
                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">${ip.status}</span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                <button onclick="deleteIp('${ip.id}')" class="text-red-600 hover:text-red-900">üóëÔ∏è</button>
            </td>`;
                tableLg.appendChild(row);

                // Mobile card
                const card = document.createElement('div');
                card.className = 'bg-white shadow rounded-lg p-4 flex flex-col space-y-2';
                card.innerHTML = `
            <div class="flex justify-between items-center">
                <span class="font-medium text-gray-900">${ip.ip}</span>
                <button onclick="deleteIp('${ip.id}')" class="text-red-600 hover:text-red-900 text-sm">üóëÔ∏è Delete</button>
            </div>
            <div class="text-sm text-gray-500">Description: ${ip.description}</div>
            <div class="text-sm text-gray-500">Last Used: ${ip.lastUsed}</div>
            <div class="text-sm">
                Status: <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">${ip.status}</span>
            </div>`;
                tableSm.appendChild(card);
            });
        }

        function addIp() {
            const ipInput = document.getElementById('ipInput').value.trim();
            const descInput = document.getElementById('descInput').value.trim();
            const errorMsg = document.getElementById('errorMsg');
            const errorText = document.getElementById('errorText');

            const ipRegex = /^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/;
            if (!ipRegex.test(ipInput)) {
                errorText.textContent = 'Please enter a valid IP address';
                errorMsg.classList.remove('hidden');
                return;
            }
            if (!descInput) {
                errorText.textContent = 'Please provide a description';
                errorMsg.classList.remove('hidden');
                return;
            }

            const newIp = {
                id: (whitelistedIps.length + 1).toString(),
                ip: ipInput,
                description: descInput,
                lastUsed: 'Never',
                status: 'active'
            };

            whitelistedIps.push(newIp);
            document.getElementById('ipInput').value = '';
            document.getElementById('descInput').value = '';
            errorMsg.classList.add('hidden');
            renderTable();
        }

        function deleteIp(id) {
            whitelistedIps = whitelistedIps.filter(ip => ip.id !== id);
            renderTable();
        }

        function refreshList() {
            renderTable();
        }

        // Initial render
        renderTable();


    </script>
</body>

</html>